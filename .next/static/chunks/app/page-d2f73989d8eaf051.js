(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{296:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),a=r(2115),n=r(8334),o=r.n(n),l=r(6874),i=r.n(l),u=r(5695),p=r(2528);function c(){let{login:e}=(0,p.A)(),[t,r]=(0,a.useState)({username:"",password:""}),[n,l]=(0,a.useState)(""),c=(0,u.useRouter)(),g=e=>{r({...t,[e.target.name]:e.target.value})},m=async r=>{r.preventDefault(),l("");try{let r=await fetch("".concat("https://form-mongodb-nextjs-expressjs-production.up.railway.app","/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await r.json();if(!r.ok)throw Error(s.error||"Ошибка входа");e(s.user),l("✅ Вход успешен!"),setTimeout(()=>c.push("/dashboard"),1e3)}catch(e){l(e.message)}};return(0,s.jsx)("div",{className:o().container,children:(0,s.jsxs)("div",{className:o().formWrapper,children:[(0,s.jsx)("h2",{className:o().title,children:"Вход"}),n&&(0,s.jsx)("p",{className:o().message,children:n}),(0,s.jsxs)("form",{onSubmit:m,children:[(0,s.jsx)("input",{className:o().input,type:"text",name:"username",placeholder:"Логин",onChange:g,required:!0}),(0,s.jsx)("input",{className:o().input,type:"password",name:"password",placeholder:"Пароль",onChange:g,required:!0}),(0,s.jsx)("button",{className:o().button,type:"submit",children:"Войти"})]}),(0,s.jsxs)("p",{className:o().toggle,children:["Нет аккаунта? ",(0,s.jsx)(i(),{href:"/register",children:"Зарегистрироваться"})]})]})})}},2528:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,AuthProvider:()=>l});var s=r(5155),a=r(2115);let n=(0,a.createContext)(null);function o(){return(0,a.useContext)(n)}function l(e){let{children:t}=e,[r,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=localStorage.getItem("user");e&&o(JSON.parse(e))},[]),(0,s.jsx)(n.Provider,{value:{user:r,login:e=>{o(e),localStorage.setItem("user",JSON.stringify(e))},logout:()=>{o(null),localStorage.removeItem("user")}},children:t})}},4881:(e,t,r)=>{Promise.resolve().then(r.bind(r,296))},8334:e=>{e.exports={container:"page_container__aoG4z",formWrapper:"page_formWrapper__g4WBb",title:"page_title__3jonF",input:"page_input___cVLA",button:"page_button__vnlhW",message:"page_message__abnJo",toggle:"page_toggle__ni725"}}},e=>{var t=t=>e(e.s=t);e.O(0,[397,244,441,684,358],()=>t(4881)),_N_E=e.O()}]);